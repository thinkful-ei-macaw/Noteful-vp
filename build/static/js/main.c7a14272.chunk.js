(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,n){},203:function(e,t,n){},205:function(e,t,n){},207:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(75),c=n.n(r),l=n(19),i=n(20),s=n(212),u=(n(85),n(87),n(37)),d=n(3),m=n(4),f=n(6),h=n(5),p=n(7),v=n(210),N=n(96),E=n(10),b=o.a.createContext({notes:[],folders:[],addFolder:function(){},addNote:function(){},deleteNote:function(){},getNotes:function(){}}),y={API_ENDPOINT:"http://localhost:8000"},j=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={nameNote:{value:""},folderId:{value:1},content:{value:""}},n.validateNoteName=function(e){if(e.preventDefault(),n.state.nameNote.value)return n.handleAddNote(n.state.nameNote,n.state.folderId,n.state.content);alert("Note must have a title!")},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleAddNote",value:function(e,t,n){var a=this;fetch("".concat(y.API_ENDPOINT,"/notes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.value,modified:new Date,folder_id:t.value,content:n.value})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).then(function(e){console.log(e),a.context.getNotes()}).catch(function(e){return e.message})}},{key:"updateName",value:function(e){this.setState({nameNote:{value:e}})}},{key:"updateFolderId",value:function(e){this.setState({folderId:{value:e}})}},{key:"updateContent",value:function(e){this.setState({content:{value:e}})}},{key:"render",value:function(){var e=this,t={color:"#A9A9A9"};return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.validateNoteName},o.a.createElement("label",{htmlFor:"nameNote"},o.a.createElement("span",{style:t}," Note Name Here")),o.a.createElement("input",{id:"nameNote",type:"text","aria-label":"Due date for book return","aria-required":"true",value:this.state.nameNote.value,onChange:function(t){return e.updateName(t.target.value)}}),o.a.createElement("label",{htmlFor:"folderName"},o.a.createElement("span",{style:t},"Select Here")),o.a.createElement("select",{id:"folderName",onChange:function(t){return e.updateFolderId(t.target.value)}},this.context.folders.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id}," ",e.folder_name," ")})),o.a.createElement("label",{htmlFor:"content"},o.a.createElement("span",{style:t},"Content Here")),o.a.createElement("input",{id:"content",type:"text","aria-label":"Add the contents of your new note.","aria-required":"true",value:this.state.content.value,onChange:function(t){return e.updateContent(t.target.value)}}),o.a.createElement("button",{type:"submit"},"Add Note")))}}]),t}(o.a.Component);j.contextType=b;var g=j,O=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={folderName:{value:""}},n.handleNoteChange=function(e){n.setState({folderName:{value:e.target.value}})},n.handleAddFolder=function(e){fetch("".concat(y.API_ENDPOINT,"/folders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_name:e})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).then(function(e){console.log(e),console.log("note added!"),console.log(n.context),n.context.getNotes(),console.log(n.context.getNotes)}).catch(function(e){return e.message})},n.validateFolderName=function(e){e.preventDefault();var t=n.state.folderName.value;return t?n.handleAddFolder(t):alert("Folder name is required")},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.validateFolderName},o.a.createElement("label",{htmlFor:"folderName"},o.a.createElement("span",{style:{color:"#A9A9A9"}},"Folder Name:")),o.a.createElement("input",{type:"text",id:"folderName",value:this.state.folderName.value,onChange:this.handleNoteChange}),o.a.createElement("button",{type:"submit"},"Add Folder")))}}]),t}(a.Component);O.contextType=b;var _=O,k=n(211),P=n(78),A=n(79);n(91);function x(e){e.tag,e.className,e.childrenm;var t=Object(A.a)(e,["tag","className","childrenm"]);return o.a.createElement(e.tag,Object(P.a)({className:["NavCircleButton",e.className].join(" ")},t),e.children)}x.defaultProps={tag:"a"};var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})},D=(n(93),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.hasError?o.a.createElement("h2",null,"Error."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(o.a.Component)),I=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.context,t=e.folders,n=void 0===t?[]:t,a=e.notes,r=void 0===a?[]:a;return o.a.createElement(D,null,o.a.createElement("div",{className:"NoteListNav"},o.a.createElement("ul",{className:"NoteListNav__list"},n.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(k.a,{className:"NoteListNav__folder-link",to:"/folder/".concat(e.id)},o.a.createElement("span",{className:"NoteListNav__num-notes"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){return e.folder_id===t}).length}(r,e.id)),e.folder_name))})),o.a.createElement("div",{className:"NoteListNav__button-wrapper"},o.a.createElement(x,{tag:N.a,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button"},o.a.createElement(E.a,{icon:"plus"}),o.a.createElement("br",null),"Folder"))))}}]),t}(o.a.Component);I.contextType=b;n(97);var T=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.context,n=t.notes,a=t.folders,r=this.props.match.params.noteId,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})}(a,(C(n,r)||{}).folder_id);return o.a.createElement("div",{className:"NotePageNav"},o.a.createElement(x,{tag:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"NotePageNav__back-button"},o.a.createElement(E.a,{icon:"chevron-left"}),o.a.createElement("br",null),"Back"),c&&o.a.createElement("h3",{className:"NotePageNav__folder-name"},c.folder_name))}}]),t}(o.a.Component);T.defaultProps={history:{goBack:function(){}},match:{params:{}}},T.contextType=b;var w=n(77),F=(n(201),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).handleClickDelete=function(e){e.preventDefault();var t=n.props.id;fetch("".concat(y.API_ENDPOINT,"/notes/").concat(t),{method:"DELETE",headers:{"content-type":"application/json"}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(){n.context.deleteNote(t),n.props.onDeleteNote(t)}).catch(function(e){console.error({error:e})})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.id,a=e.modified;return o.a.createElement("div",{className:"Note"},o.a.createElement("h2",{className:"Note__title"},o.a.createElement(N.a,{to:"/note/".concat(n)},t)),o.a.createElement("button",{className:"Note__delete",type:"button",onClick:this.handleClickDelete},o.a.createElement(E.a,{icon:"trash-alt"})," ","remove"),o.a.createElement("div",{className:"Note__dates"},o.a.createElement("div",{className:"Note__dates-modified"},"Modified"," ",o.a.createElement("span",{className:"Date"},Object(w.format)(a,"Do MMM YYYY")))))}}]),t}(o.a.Component));F.defaultProps={onDeleteNote:function(){}},F.contextType=b;n(203);var S=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.match.params.folderId,t=this.context.notes;console.log("context",this.context);var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter(function(e){return e.folder_id===t}):e}(t,Number(e));return console.log(n),o.a.createElement(D,null,o.a.createElement("section",{className:"NoteListMain"},o.a.createElement("ul",null,n.map(function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(F,{id:e.id,name:e.name,modified:e.modified}))})),o.a.createElement("div",{className:"NoteListMain__button-container"},o.a.createElement(x,{tag:N.a,to:"/add-note",type:"button",className:"NoteListMain__add-note-button"},o.a.createElement(E.a,{icon:"plus"}),o.a.createElement("br",null),"Note"))))}}]),t}(o.a.Component);S.defaultProps={match:{params:{}}},S.contextType=b;n(205);var M=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).handleDeleteNote=function(e){n.props.history.push("/")},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.context.notes,t=void 0===e?[]:e,n=this.props.match.params.noteId,a=C(t,n)||{content:""};return o.a.createElement("section",{className:"NotePageMain"},o.a.createElement(F,{id:a.id,name:a.name,modified:a.modified,onDeleteNote:this.handleDeleteNote}),o.a.createElement("div",{className:"NotePageMain__content"},a.content.split(/\n \r|\n/).map(function(e,t){return o.a.createElement("p",{key:t},e)})))}}]),t}(o.a.Component);M.defaultProps={match:{params:{}}},M.contextType=b;n(207);var L=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={notes:[],folders:[]},n.handleGetNotes=function(){console.log("Fetching new info!"),Promise.all([fetch("".concat(y.API_ENDPOINT,"/notes")),fetch("".concat(y.API_ENDPOINT,"/folders"))]).then(function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return n.ok?a.ok?Promise.all([n.json(),a.json()]):a.json().then(function(e){return Promise.reject(e)}):n.json().then(function(e){return Promise.reject(e)})}).then(function(e){var t=Object(u.a)(e,2),a=t[0],o=t[1];console.log("notes",a),console.log("folders",o),n.setState({notes:a,folders:o})}).catch(function(e){console.error({error:e})})},n.handleDeleteNote=function(e){n.setState({notes:n.state.notes.filter(function(t){return t.id!==e})})},n.handleAddNote=function(e){n.setState({notes:n.state.notes.map(function(t){return t.id===e})})},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.handleGetNotes()}},{key:"renderNavRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(v.a,{exact:!0,key:e,path:e,component:I})}),o.a.createElement(v.a,{path:"/note/:noteId",component:T}),o.a.createElement(v.a,{path:"/add-folder",component:T}),o.a.createElement(v.a,{path:"/add-note",component:T}))}},{key:"renderMainRoutes",value:function(){return o.a.createElement(o.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return o.a.createElement(v.a,{exact:!0,key:e,path:e,component:S})}),o.a.createElement(v.a,{path:"/note/:noteId",component:M}),o.a.createElement(v.a,{path:"/add-note",component:g}),o.a.createElement(v.a,{path:"/add-folder",component:_}))}},{key:"render",value:function(){if(console.log("has error",this.state.hasError),this.state.hasError)return o.a.createElement("h1",null,"Error!");var e={notes:this.state.notes,folders:this.state.folders,deleteNote:this.handleDeleteNote,getNotes:this.handleGetNotes};return o.a.createElement(b.Provider,{value:e},o.a.createElement("div",{className:"App"},o.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),o.a.createElement("header",{className:"App__header"},o.a.createElement("h1",null,o.a.createElement(N.a,{to:"/"},"Noteful")," ",o.a.createElement(E.a,{icon:"check-double"}))),o.a.createElement("main",{className:"App__main"},this.renderMainRoutes())))}}]),t}(a.Component);l.b.add(i.c,i.b,i.d,i.a),c.a.render(o.a.createElement(s.a,null,o.a.createElement(L,null)),document.getElementById("root"))},80:function(e,t,n){e.exports=n(209)},87:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){},97:function(e,t,n){}},[[80,2,1]]]);
//# sourceMappingURL=main.c7a14272.chunk.js.map